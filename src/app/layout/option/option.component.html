<div *ngIf="{ data: data.$data | async } as _data">
  <div class="row" *ngIf="_data.data != null">
    <div class="col-12 text-end">
      <button
        type="button"
        class="btn btn-sm btn-danger me-2"
        (click)="reset(data, _data)"
      >
        <i class="fa-solid fa-arrows-rotate"></i>
      </button>
    </div>
    <div class="col-6" *ngFor="let i of ob(_data.data)['expiryData_key']">
      <!--    {{ ob(_data.data)["expiryData"][i] | json }}-->
      {{ i }}
      <table id="example" class="table table-sm table-striped table-hover mt-2">
        <thead class="header-fixed bg">
          <tr>
            <th class="text-end">OI</th>
            <th class="text-end">COI</th>
            <th class="text-center">Strike Price</th>

            <th class="text-end">COI</th>
            <th class="text-end">OI</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of ob(_data.data).expiryData[i]">
            <td
              class="text-end"
              [class]="{
                'bg-primary-subtle':
                  i.strikePrice < (i?.CE?.underlyingValue || 0)
              }"
            >
              {{ i.CE.openInterest }}
            </td>
            <td
              class="text-end"
              [class]="{
                'bg-primary-subtle':
                  i.strikePrice < (i?.CE?.underlyingValue || 0)
              }"
            >
              {{ i.CE.changeinOpenInterest }}
            </td>
            <td class="text-center">{{ i.strikePrice }}</td>

            <td
              class="text-end"
              [class]="{
                'bg-primary-subtle':
                  i.strikePrice > (i?.PE?.underlyingValue || 0)
              }"
            >
              {{ i.PE.changeinOpenInterest }}
            </td>

            <td
              class="text-end"
              [class]="{
                'bg-primary-subtle':
                  i.strikePrice > (i?.PE?.underlyingValue || 0)
              }"
            >
              {{ i.PE.openInterest }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!--{{ data.expiryData_key | json }}
  {{ data.expiryData[data.expiryData_key[0]] | json }}
  <div *ngIf="data.expiryData_key !== undefined">
    <div *ngFor="let i of check(data, 'data.expiryData_key')">
      {{ i }}
    </div>
  </div>-->
  </div>
</div>
